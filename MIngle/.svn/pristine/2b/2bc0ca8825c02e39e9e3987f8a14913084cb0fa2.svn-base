package scripts.Streams;

import java.util.HashMap;

import org.apache.commons.lang3.RandomStringUtils;
import org.testng.annotations.AfterClass;
import org.testng.annotations.BeforeClass;
import org.testng.annotations.Test;

import com.relevantcodes.extentreports.ExtentTest;

import actions.Actions;
import objRepository.Global;
import reusableMethods.RM_Streams;
import utility.Utility;

public class Ts_CancelStream_13249 {
	ExtentTest logger;
	Utility utl;
	 HashMap<String, String> testData=Utility.getTestData();
	 HashMap<String, String> configData=Utility.getConfigData();
		//TESTDATA
		 String userName=configData.get("USER6");
		 String pwd=configData.get("PASSWORD");
		 String templateName=testData.get("TEMPLATENAME");
		 String templateDesc=testData.get("TEMPLAEDESC");
		 String tag1=testData.get("TAG1");
		 String tag2=testData.get("TAG2");
		 String streamOwner=testData.get("STREAMOWNER");
		 String internalParticipant=testData.get("STREAMPARTICIPANT");
		 String stepName=testData.get("STEPNAME");
		 String stepDesc=testData.get("STEPDESC");
		 String stepDetails=testData.get("TD_IONAPI_STEPDETAILS");
		 String tempName=templateName+RandomStringUtils.randomNumeric(3);
	@BeforeClass
	public void setUp()
	{
		 utl=new Utility();
		 logger=utl.initTest(this.getClass().getName().substring(this.getClass().getName().lastIndexOf(".")+1).trim());
		 new Actions();
	
	}
	@AfterClass
	public void tearDown() throws Exception
	{
		/*Utility.report.endTest(logger);
		//Actions.driverClose();
		Utility.report.flush();*/
		Actions.logOutAndBrowserClose();
		
		//Utility.execute("C:\\Mingle_Project\\MIngle\\Mingle\\zipdemo.zip");
	}
	
	@Test
	public void getTitle() throws InterruptedException
	{
		try{
		//LOGIN INTO THE APPLICATION
			Global.login(userName,pwd);
			//VERIFY STREAMS
			RM_Streams.createTemplateWithOneStep(tempName,templateDesc,tag1,tag2,streamOwner,internalParticipant,stepName,stepDesc);
		RM_Streams.createStream(tempName);
		RM_Streams.cancelStreamInstance();
	} catch (Exception e) {
		
		
	}
		finally{
			Global.logOut();
			Actions.driverClose();
			
			delete_Template();
		}
		
	}
	
	//DELETE TEMPLATE
	public  void delete_Template() throws InterruptedException{
		Global.login(userName,pwd);		
		/*RM_Streams.delete_Template();
		RM_Streams.delete_Stream(templateName,stepDetails);*/

			Actions.switchToDefaultContent();
			// Delete Stream
			RM_Streams.delete_Template(tempName);
			// Delete Stream
			RM_Streams.navigateToStreams();
			RM_Streams.delete_CanceledStream(tempName);
		/*	RM_Streams.deleteStream();
			Global.acceptConfirmation();*/
			
		
	}
}
